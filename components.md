# Компонентная архитектура

## Компонентная диаграмма

```

@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

AddElementTag("mechanics", $shape=EightSidedShape(), $bgColor="CornflowerBlue", $fontColor="white", $legendText="microservice")
AddElementTag("storage", $shape=RoundedBoxShape(), $bgColor="lightSkyBlue", $fontColor="white")

Person(user, "Пользователь")

System_Ext(controller, "Контроллер", "VR-стики")

System_Boundary(conference_site, "Механики управления") {
   'Container(controller, "Контроллер")
   Container(floor_mechanics, "Механика постановки пола", $tags = "mechanics")    
   Container(choose_mechanics, "Механика выбора объектов", $tags = "mechanics") 
   Container(drag_mechanics, "Механика Drag&Drop", $tags = "mechanics")   
   
}


Rel(user, controller, "Взаимодействие с механиками приложения")

Rel(controller, floor_mechanics, "Размещение блоков и постановка стен")

Rel(controller, choose_mechanics, "Взаимодействие с инвентарём")


Rel(controller, drag_mechanics, "Перемещение объектов стиками")
@enduml

```
![image](https://user-images.githubusercontent.com/113284506/233986733-a28e7dc3-8ccb-4675-bbb0-a4e81c0b5d46.png)


***

## Список компонентов  

- 1. Механика постановки пола
- 2. Механика выбора объектов
- 3. Механика Drag&Drop

***

### 1. Механика постановки пола
**API**:
- Постановка/удаление блоков пола
  - Входные параметры: нажатие клавиши постановки/удаления блоков, расчёт координат
  - Выходные параметры: изменение ситуации на плоскости пола;
- Возведение/удаление стен;
  - Входные параметры: нажатие клавиши возведения/удаления объекта, факт наличия соседних блоков пола;
  - Выходные параметры: изменение ситуации на сцене;


### 2. Механика выбора объектов
**API**:
- Вызов меню на экране пользователя
  - Входные параметры: нажатие клавиши вызова меню, 
  - Выходные параметры: круговое меню, где указаны название, категория объектов 
- Выбор объектов мебели в меню
  - Входные параметры: ряд, где для каждого указаны идентификатор, название, категория;
  - Выходные параметры: появление объекта в режиме Drag&Drop;
- Переключение экранов меню
  - Входные параметры: категория меню, нажатие клавиши контроллера; 
  - Выходные параметры: выбранный экран меню;
- Отрисовка 3D-моделей объектов в меню
  - Входные параметры: путь к объекту, класс, текстура объекта;
  - Выходные параметры: рендеринг 3D-модели в иконке меню;

***

### 3. Механика Drag&Drop
**API**:
- Перемещение предметов в воздухе
  - Входные параметры: координаты объектов, команды контроллера; 
  - Выходные параметры: изменение координат объекта на сцене;
- Вращение предметов
  - Входные параметры: положение относительно плоскости пола
  - Выходные параметры: измененные градусы поворота над полом; 
- Постановка предметов
  - Входные параметры: команды контроллера;
  - Выходные параметры: фиксация координат объекта на сцене.
